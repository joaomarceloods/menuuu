<% just_created = menu_item.id.to_s == @just_created_menu_item_id %>

<%= turbo_frame_tag menu_item, data: { sortable_menu_items_update_url: private_menu_item_path(menu_item) } do %>
  <%= form_with \
        model: menu_item,
        url: [:private, menu_item],
        data: {
          controller: 'menu-item-edit-form',
          action: 'input->menu-item-edit-form#input keypress.enter->menu-item-edit-form#keypressEnter:prevent',
          menu_item_edit_form_is_just_created_value: just_created,
        } do |form| %>

    <%= render "private/menu_items/form_fields", form: form, autofocus: just_created %>
  <% end %>

  <% if menu_item.persisted? %>
    <%= link_to 'Remove', [:private, menu_item], data: { turbo_method: :delete } %>
    <%= button_to "Add item", private_menu_items_path(menu_item: { menu_section_id: menu_item.menu_section_id, position: menu_item.position + 1 }), data: { turbo_frame: :list } %>
  <% end %>

  <br/>
  <br/>
<% end %>
