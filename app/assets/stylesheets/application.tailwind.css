@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    font-family: 'Bebas Neue', sans-serif
  }

  turbo-frame {
    @apply block
  }

  .main-content {
    @apply w-[calc(100%-6rem)] max-w-96 mx-auto
  }

  /* See app/javascript/controllers/menu_item_form_controller.js */
  .hack-mobile-safari-focus {
    @apply fixed opacity-0 h-0 text-base
  }

  .material-symbols-sharp {
    @apply text-inherit align-middle
  }

  a, button {
    @apply transition-opacity hover:opacity-80 disabled:opacity-100 disabled:cursor-not-allowed
  }
}

@layer components {
  .navigation {
    @apply sticky top-0 z-10 bg-black text-white py-2 text-xl;
  }

  .navigation__bar {
    @apply flex justify-between items-center
  }

  .navigation__menu {
    @apply flex flex-col items-end transition-all overflow-hidden gap-2 max-h-0;
  }

  .navigation__menu--expanded {
    @apply max-h-40 py-4
  }

  .notices {
    @apply flex justify-between items-start py-2 gap-2;
  }

  .group\/actions {
    @apply relative -mx-12 px-12
  }

  .actions {
    @apply invisible group-focus-within/actions:visible absolute top-0 flex justify-between items-center h-full w-full -mx-12;
    /*
    iPhone fix:
    If the action bar changes visibility immediately, it won't register clicks on action bar buttons.
    I think that's because the button hides before the touch event is detected.
    To workaround that issue, delay hiding by 1ms.
    */
    transition: visibility 1ms
  }

  .sortable-chosen .actions {
    @apply visible
  }

  .actions__item {
    @apply text-xl w-12 text-center;
  }

  .actions__item--handle {
    @apply cursor-grab
  }

  .sortable-chosen .actions__item--handle {
    @apply cursor-grabbing
  }

  .add-button {
    @apply text-xl transition-opacity opacity-20 disabled:opacity-20 focus:outline-none;
  }

  .lite-input {
    @apply bg-none border-0 m-0 p-0 max-w-full focus:ring-0 placeholder:text-black placeholder:opacity-20;
  }
  .lite-input::-webkit-outer-spin-button,
  .lite-input::-webkit-inner-spin-button {
    @apply appearance-none m-0;
  }
  .lite-input[type=number] {
    appearance: textfield;
  }

  .saving {
    @apply fixed top-2 right-4 text-green-500 text-xl z-10 invisible transition-visibility delay-500;
  }

  [aria-busy] .saving {
    @apply visible animate-pulse;
  }
}
